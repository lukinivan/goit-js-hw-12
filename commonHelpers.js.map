{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/img/blocked.svg","../src/js/iziToast.js","../src/js/variables.js","../src/main.js"],"sourcesContent":["export function imagesTemplate(data) {\n  return data.map(imageTemplate).join('');\n}\n\nfunction imageTemplate(img) {\n  return `\n  <div class=\"image-container\">\n    <a href=\"${img.largeImageURL}\">\n      <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" title=\"\" />\n    </a>\n    \n    <div class=\"stats\">\n      <div class=\"stat\">\n        <span class=\"label\">Likes</span>\n        <span class=\"value\">${img.likes}</span>\n      </div>\n      <div class=\"stat\">\n        <span class=\"label\">Views</span>\n        <span class=\"value\">${img.views}</span>\n      </div>\n      <div class=\"stat\">\n        <span class=\"label\">Comments</span>\n        <span class=\"value\">${img.comments}</span>\n      </div>\n      <div class=\"stat\">\n        <span class=\"label\">Downloads</span>\n        <span class=\"value\">${img.downloads}</span>\n      </div>\n    </div>\n  </div>`;\n}\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const requestParams = {\n  query: '',\n  page: 1,\n  per_page: 15,\n  total_hits: 0,\n};\n\nexport function getPhotos() {\n  const API_KEY = '44003480-04272ce3fae5ad0292fb853b7';\n  const params = {\n    params: {\n      key: API_KEY,\n      q: requestParams.query,\n      page: requestParams.page,\n      per_page: requestParams.per_page,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n    },\n  };\n\n  return axios.get('', params);\n}\n","export default \"__VITE_ASSET__b8c33d4d__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport icon from '../img/blocked.svg';\n\nexport function noImageMessage() {\n  iziToast.show({\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    messageColor: 'black',\n    color: 'red',\n    position: 'topRight',\n    timeout: 3000,\n    close: true,\n    progressBar: true,\n    iconUrl: icon,\n  });\n}\nexport function noMoreImages() {\n  iziToast.show({\n    message: \"We're sorry, but you've reached the end of search results.\",\n    messageColor: 'black',\n    color: 'blue',\n    position: 'topRight',\n    timeout: 3000,\n    close: true,\n    progressBar: true,\n  });\n}\n\nexport function responseError(errorMessage) {\n  iziToast.error({\n    title: 'Error',\n    position: 'topRight',\n    message: errorMessage,\n  });\n}\n","// #region Simple light box\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const lightBox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n// #endregion\n\n// #region Query Selectors\n\nexport const refs = {\n  requestForm: document.querySelector('.js-request-form'),\n  galleryCont: document.querySelector('.js-gallery'),\n  imageLoader: document.querySelector('.js-loader'),\n  loadMoreBtn: document.querySelector('.js-load-more'),\n};\n\n// #endregion\n\n// #region Hidden Elements\n\nexport const loader = {\n  show() {\n    refs.imageLoader.classList.remove('hide');\n  },\n  hide() {\n    refs.imageLoader.classList.add('hide');\n  },\n};\n\nexport const loadButton = {\n  isActive: false,\n  show() {\n    refs.loadMoreBtn.classList.remove('hide');\n    this.isActive = true;\n  },\n  hide() {\n    refs.loadMoreBtn.classList.add('hide');\n    this.isActive = false;\n  },\n};\n\n// #endregion\n","import { imagesTemplate } from './js/render-functions.js';\nimport { getPhotos, requestParams } from './js/pixabay-api.js';\nimport { noImageMessage, responseError, noMoreImages } from './js/iziToast.js';\n\nimport { refs, lightBox, loader, loadButton } from './js/variables.js';\nimport flatpickr from 'flatpickr';\n\nrefs.requestForm.addEventListener('submit', e => {\n  e.preventDefault();\n\n  requestParams.query = e.currentTarget.elements.query.value.trim();\n  refs.galleryCont.innerHTML = '';\n  requestParams.page = 1;\n  loadButton.hide();\n\n  callPixabeyAPI();\n\n  e.currentTarget.reset();\n});\n\nrefs.loadMoreBtn.addEventListener('click', e => {\n  requestParams.page += 1;\n  callPixabeyAPI();\n});\n\nasync function callPixabeyAPI() {\n  loader.show();\n  try {\n    const {\n      data: { hits, totalHits },\n    } = await getPhotos();\n\n    requestParams.total_hits = totalHits;\n\n    totalHits === 0\n      ? noImageMessage()\n      : refs.galleryCont.insertAdjacentHTML('beforeend', imagesTemplate(hits));\n\n    lightBox.refresh();\n\n    if (requestParams.page > 1) scrollPage();\n\n    updateBtnStatus();\n    loader.hide();\n  } catch (error) {\n    responseError(error.message);\n    loader.hide();\n  }\n}\n\nfunction updateBtnStatus() {\n  const maxPages = Math.ceil(requestParams.total_hits / requestParams.per_page);\n  if (requestParams.page <= maxPages && !loadButton.isActive) {\n    loadButton.show();\n  }\n  if (requestParams.page >= maxPages && loadButton.isActive) {\n    noMoreImages();\n    loadButton.hide();\n  }\n}\n\nfunction scrollPage() {\n  const { height: cardHeight } =\n    refs.galleryCont.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 3,\n    behavior: 'smooth',\n  });\n}\n"],"names":["imagesTemplate","data","imageTemplate","img","axios","requestParams","getPhotos","params","icon","noImageMessage","iziToast","noMoreImages","responseError","errorMessage","lightBox","SimpleLightbox","refs","loader","loadButton","callPixabeyAPI","hits","totalHits","scrollPage","updateBtnStatus","error","maxPages","cardHeight"],"mappings":"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"}